<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="483" height="697"><desc>title%20ChatGPT%20message%20workflow%0A%0Anote%20over%20User%2CFacebook%20Server%3Asent%20message%20to%20page%0AUser-%3EFacebook%20Server%3Amessage%20data%0Anote%20over%20Facebook%20Server%2C%20Ngrok%3Acall%20webhook%0AFacebook%20Server-%3E%20Ngrok%20%3Amessage%20data%0Anote%20over%20Ngrok%2C%20Flask%20app%3Amapping%20part%0ANgrok-%3E%20Flask%20app%20%3Amessage%20data%0Anote%20over%20Flask%20app%2C%20Facebook%20Server%20%3A%20get%20message%20history%0AFlask%20app-%3E%20Facebook%20Server%20%3A%20messages_id%0AFacebook%20Server--%3E%20Flask%20app%20%3A%20message%20history%0Anote%20over%20Flask%20app%2C%20OpenAI%3A%20Call%20ChatGPT%0AFlask%20app-%3E%20OpenAI%20%3Amessage%20history%0AOpenAI--%3E%20Flask%20app%20%3Arepyl%20message%0Anote%20over%20Flask%20app%2C%20Facebook%20Server%3Acall%20send_message%20API%0AFlask%20app-%3E%20Facebook%20Server%20%3Areply%20message%0Anote%20over%20Facebook%20Server%2CUser%3Asent%20message%20to%20user%0AFacebook%20Server-%3EUser%3Areply%20message</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="483" height="697"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="140.32784626672463" y="16.96348035" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">ChatGPT message workflow</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 29.17810117009375 66.383753103 L 29.17810117009375 697.4252221229999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.37963567751564 66.383753103 L 145.37963567751564 697.4252221229999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 242.50014513708595 66.383753103 L 242.50014513708595 697.4252221229999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.62065459665627 66.383753103 L 339.62065459665627 697.4252221229999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 447.39071544782814 66.383753103 L 447.39071544782814 697.4252221229999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 5.65449345 35.849488473 L 52.701708890187504 35.849488473 L 52.701708890187504 66.383753103 L 5.65449345 66.383753103 L 5.65449345 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="17.9247442365" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">User</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 92.52286755703126 35.849488473 L 198.23640379800003 35.849488473 L 198.23640379800003 66.383753103 L 92.52286755703126 66.383753103 L 92.52286755703126 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="104.79311834353126" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Facebook Server</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 216.01225061279297 35.849488473 L 268.98803966137893 35.849488473 L 268.98803966137893 66.383753103 L 216.01225061279297 66.383753103 L 216.01225061279297 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="228.28250139929298" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ngrok</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 304.2425012833008 35.849488473 L 374.9988079100117 35.849488473 L 374.9988079100117 66.383753103 L 304.2425012833008 66.383753103 L 304.2425012833008 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="316.5127520698008" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Flask app</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 417.04585681220703 35.849488473 L 477.73557408344925 35.849488473 L 477.73557408344925 66.383753103 L 417.04585681220703 66.383753103 L 417.04585681220703 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="429.31610759870705" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">OpenAI</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 19.00001296009375 89.001726903 L 145.37963567751564 89.001726903 L 155.55772388751564 99.179815113 L 155.55772388751564 115.012396773 L 19.00001296009375 115.012396773 L 19.00001296009375 89.001726903 M 145.37963567751564 89.001726903 L 145.37963567751564 99.179815113 L 155.55772388751564 99.179815113" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="34.832594620093744" y="104.83430856300001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sent message to page</text></g><g><g><rect fill="white" stroke="none" x="52.10091485901954" y="131.975877123" width="70.35590712957031" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="53.79726289401954" y="142.153965333" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 29.17810117009375 146.677560093 L 136.06856979651565 146.677560093" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(145.37963567751564,146.677560093) translate(-145.37963567751564,-146.677560093)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 135.95547992751563 141.965482218 L 145.37963567751564 146.677560093 L 135.95547992751563 151.38963796800002 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 135.20154746751564 163.641040443 L 242.50014513708595 163.641040443 L 252.67823334708595 173.819128653 L 252.67823334708595 189.65171031300002 L 135.20154746751564 189.65171031300002 L 135.20154746751564 163.641040443 M 242.50014513708595 163.641040443 L 242.50014513708595 173.819128653 L 252.67823334708595 173.819128653" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="163.12588741657814" y="179.47362210300003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call webhook</text></g><g><g><rect fill="white" stroke="none" x="158.76193684251564" y="206.61519066300002" width="70.35590712957031" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="160.45828487751564" y="216.79327887300002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.37963567751564 221.31687363300003 L 233.18907925608596 221.31687363300003" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(242.50014513708595,221.31687363300003) translate(-242.50014513708595,-221.31687363300003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 233.07598938708594 216.60479575800002 L 242.50014513708595 221.31687363300003 L 233.07598938708594 226.02895150800003 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 232.32205692708595 238.280353983 L 339.62065459665627 238.280353983 L 349.79874280665626 248.458442193 L 349.79874280665626 264.291023853 L 232.32205692708595 264.291023853 L 232.32205692708595 238.280353983 M 339.62065459665627 238.280353983 L 339.62065459665627 248.458442193 L 349.79874280665626 248.458442193" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="259.9497049816172" y="254.11293564300001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mapping part</text></g><g><g><rect fill="white" stroke="none" x="255.88244630208592" y="281.254504203" width="70.35590712957031" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="257.5787943370859" y="291.432592413" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 242.50014513708595 295.956187173 L 330.3095887156563 295.956187173" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(339.62065459665627,295.956187173) translate(-339.62065459665627,-295.956187173)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 330.19649884665625 291.244109298 L 339.62065459665627 295.956187173 L 330.19649884665625 300.66826504799997 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 135.20154746751564 312.919667523 L 339.62065459665627 312.919667523 L 349.79874280665626 323.097755733 L 349.79874280665626 338.930337393 L 135.20154746751564 338.930337393 L 135.20154746751564 312.919667523 M 339.62065459665627 312.919667523 L 339.62065459665627 323.097755733 L 349.79874280665626 323.097755733" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="194.8035051224375" y="328.752249183" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">get message history</text></g><g><g><rect fill="white" stroke="none" x="209.39901957523048" y="355.893817743" width="66.20225112371094" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="211.09536761023048" y="366.071905953" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">messages_id</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.62065459665627 370.595500713 L 154.69070155851563 370.595500713" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(145.37963567751564,370.595500713) translate(-145.37963567751564,-370.595500713)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 154.80379142751565 365.883422838 L 145.37963567751564 370.595500713 L 154.80379142751565 375.30757858799996 Z"/></g></g><g><g><rect fill="white" stroke="none" x="201.9974158765" y="387.558981063" width="81.00545852117187" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="203.6937639115" y="397.737069273" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message history</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.37963567751564 402.26066403299995 L 330.3095887156563 402.26066403299995" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="4.52359476"/><g transform="translate(339.62065459665627,402.26066403299995) translate(-339.62065459665627,-402.26066403299995)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 330.19649884665625 397.548586158 L 339.62065459665627 402.26066403299995 L 330.19649884665625 406.97274190799993 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 329.44256638665627 419.22414438299995 L 447.39071544782814 419.22414438299995 L 457.56880365782814 429.40223259299995 L 457.56880365782814 445.23481425299997 L 329.44256638665627 445.23481425299997 L 329.44256638665627 419.22414438299995 M 447.39071544782814 419.22414438299995 L 447.39071544782814 429.40223259299995 L 457.56880365782814 429.40223259299995" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="360.62785451687114" y="435.05672604299997" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Call ChatGPT</text></g><g><g><rect fill="white" stroke="none" x="353.00295576165627" y="462.19829460299997" width="81.00545852117187" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="354.6993037966563" y="472.37638281299996" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message history</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.62065459665627 476.89997757299994 L 438.07964956682815 476.89997757299994" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(447.39071544782814,476.89997757299994) translate(-447.39071544782814,-476.89997757299994)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 437.96655969782813 472.18789969799997 L 447.39071544782814 476.89997757299994 L 437.96655969782813 481.6120554479999 Z"/></g></g><g><g><rect fill="white" stroke="none" x="357.1487916381211" y="493.86345792299994" width="72.71378676824219" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="358.84513967312114" y="504.04154613299994" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">repyl message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 447.39071544782814 508.5651408929999 L 348.93172047765626 508.5651408929999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="4.52359476"/><g transform="translate(339.62065459665627,508.5651408929999) translate(-339.62065459665627,-508.5651408929999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 349.0448103466563 503.85306301799994 L 339.62065459665627 508.5651408929999 L 349.0448103466563 513.2772187679999 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 135.20154746751564 525.5286212429999 L 339.62065459665627 525.5286212429999 L 349.79874280665626 535.7067094529999 L 349.79874280665626 551.5392911129999 L 135.20154746751564 551.5392911129999 L 135.20154746751564 525.5286212429999 M 339.62065459665627 525.5286212429999 L 339.62065459665627 535.7067094529999 L 349.79874280665626 535.7067094529999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="186.80071276403908" y="541.3612029029999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call send_message API</text></g><g><g><rect fill="white" stroke="none" x="206.14325175296486" y="568.5027714629999" width="72.71378676824219" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="207.83959978796486" y="578.680859673" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">reply message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.62065459665627 583.2044544329999 L 154.69070155851563 583.2044544329999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(145.37963567751564,583.2044544329999) translate(-145.37963567751564,-583.2044544329999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 154.80379142751565 578.4923765579999 L 145.37963567751564 583.2044544329999 L 154.80379142751565 587.9165323079999 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 19.00001296009375 600.1679347829999 L 145.37963567751564 600.1679347829999 L 155.55772388751564 610.3460229929999 L 155.55772388751564 626.1786046529999 L 19.00001296009375 626.1786046529999 L 19.00001296009375 600.1679347829999 M 145.37963567751564 600.1679347829999 L 145.37963567751564 610.3460229929999 L 155.55772388751564 610.3460229929999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="36.321249710425775" y="616.0005164429999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sent message to user</text></g><g><g><rect fill="white" stroke="none" x="50.9219750396836" y="643.1420850029999" width="72.71378676824219" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="52.6183230746836" y="653.320173213" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">reply message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.37963567751564 657.8437679729999 L 38.48916705109375 657.8437679729999" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(29.17810117009375,657.8437679729999) translate(-29.17810117009375,-657.8437679729999)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 38.60225692009375 653.1316900979999 L 29.17810117009375 657.8437679729999 L 38.60225692009375 662.5558458479999 Z"/></g></g></g><g/><g/><g/><g/><g/></g></svg>