<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="474" height="531"><desc>title%20%20Message%20workflow%0A%0Anote%20over%20User%2CFacebook%20Server%3Asent%20message%20to%20page%0AUser-%3EFacebook%20Server%3Amessage%20data%0Anote%20over%20Facebook%20Server%2C%20Ngrok%3Acall%20webhook%0AFacebook%20Server-%3E%20Ngrok%20%3Amessage%20data%0Anote%20over%20Ngrok%2C%20Flask%20app%3Amapping%20part%0ANgrok-%3E%20Flask%20app%20%3Amessage%20data%0AFlask%20app-%3E%20Flask%20app%20%3Agenerate%20reply%20message%0Anote%20over%20Flask%20app%2C%20Facebook%20Server%3Acall%20send_message%20API%0AFlask%20app-%3E%20Facebook%20Server%20%3Areply%20message%0Anote%20over%20Facebook%20Server%2CUser%3Asent%20message%20to%20user%0AFacebook%20Server-%3EUser%3Areply%20message</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="474" height="531"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="12pt" font-style="normal" font-weight="normal" text-decoration="normal" x="169.3363377102422" y="16.96348035" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"> Message workflow</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 29.17810117009375 66.383753103 L 29.17810117009375 531.183114693" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.37963567751564 66.383753103 L 145.37963567751564 531.183114693" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 242.50014513708595 66.383753103 L 242.50014513708595 531.183114693" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.62065459665627 66.383753103 L 339.62065459665627 531.183114693" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray="8.699220692307692,3.7696623000000002"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 5.65449345 35.849488473 L 52.701708890187504 35.849488473 L 52.701708890187504 66.383753103 L 5.65449345 66.383753103 L 5.65449345 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="17.9247442365" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">User</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 92.52286755703126 35.849488473 L 198.23640379800003 35.849488473 L 198.23640379800003 66.383753103 L 92.52286755703126 66.383753103 L 92.52286755703126 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="104.79311834353126" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Facebook Server</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 216.01225061279297 35.849488473 L 268.98803966137893 35.849488473 L 268.98803966137893 66.383753103 L 216.01225061279297 66.383753103 L 216.01225061279297 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="228.28250139929298" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Ngrok</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 304.2425012833008 35.849488473 L 374.9988079100117 35.849488473 L 374.9988079100117 66.383753103 L 304.2425012833008 66.383753103 L 304.2425012833008 35.849488473 Z" stroke-miterlimit="10" stroke-width="1.8094379040000002" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="316.5127520698008" y="55.074766203" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Flask app</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 19.00001296009375 89.001726903 L 145.37963567751564 89.001726903 L 155.55772388751564 99.179815113 L 155.55772388751564 115.012396773 L 19.00001296009375 115.012396773 L 19.00001296009375 89.001726903 M 145.37963567751564 89.001726903 L 145.37963567751564 99.179815113 L 155.55772388751564 99.179815113" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="34.832594620093744" y="104.83430856300001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sent message to page</text></g><g><g><rect fill="white" stroke="none" x="52.10091485901954" y="131.975877123" width="70.35590712957031" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="53.79726289401954" y="142.153965333" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 29.17810117009375 146.677560093 L 136.06856979651565 146.677560093" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(145.37963567751564,146.677560093) translate(-145.37963567751564,-146.677560093)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 135.95547992751563 141.965482218 L 145.37963567751564 146.677560093 L 135.95547992751563 151.38963796800002 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 135.20154746751564 163.641040443 L 242.50014513708595 163.641040443 L 252.67823334708595 173.819128653 L 252.67823334708595 189.65171031300002 L 135.20154746751564 189.65171031300002 L 135.20154746751564 163.641040443 M 242.50014513708595 163.641040443 L 242.50014513708595 173.819128653 L 252.67823334708595 173.819128653" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="163.12588741657814" y="179.47362210300003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call webhook</text></g><g><g><rect fill="white" stroke="none" x="158.76193684251564" y="206.61519066300002" width="70.35590712957031" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="160.45828487751564" y="216.79327887300002" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.37963567751564 221.31687363300003 L 233.18907925608596 221.31687363300003" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(242.50014513708595,221.31687363300003) translate(-242.50014513708595,-221.31687363300003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 233.07598938708594 216.60479575800002 L 242.50014513708595 221.31687363300003 L 233.07598938708594 226.02895150800003 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 232.32205692708595 238.280353983 L 339.62065459665627 238.280353983 L 349.79874280665626 248.458442193 L 349.79874280665626 264.291023853 L 232.32205692708595 264.291023853 L 232.32205692708595 238.280353983 M 339.62065459665627 238.280353983 L 339.62065459665627 248.458442193 L 349.79874280665626 248.458442193" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="259.9497049816172" y="254.11293564300001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">mapping part</text></g><g><g><rect fill="white" stroke="none" x="255.88244630208592" y="281.254504203" width="70.35590712957031" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="257.5787943370859" y="291.432592413" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">message data</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 242.50014513708595 295.956187173 L 330.3095887156563 295.956187173" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(339.62065459665627,295.956187173) translate(-339.62065459665627,-295.956187173)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 330.19649884665625 291.244109298 L 339.62065459665627 295.956187173 L 330.19649884665625 300.66826504799997 Z"/></g></g><g><g><rect fill="white" stroke="none" x="353.00295576165627" y="312.919667523" width="117.75844924382812" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="354.6993037966563" y="323.097755733" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">generate reply message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.62065459665627 327.621350493 L 384.85660219665624 327.621350493 L 384.85660219665624 342.323033463 L 348.93172047765626 342.323033463" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(339.62065459665627,342.323033463) translate(-339.62065459665627,-342.323033463)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 349.0448103466563 337.610955588 L 339.62065459665627 342.323033463 L 349.0448103466563 347.035111338 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 135.20154746751564 359.286513813 L 339.62065459665627 359.286513813 L 349.79874280665626 369.464602023 L 349.79874280665626 385.297183683 L 135.20154746751564 385.297183683 L 135.20154746751564 359.286513813 M 339.62065459665627 359.286513813 L 339.62065459665627 369.464602023 L 349.79874280665626 369.464602023" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="186.80071276403908" y="375.119095473" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">call send_message API</text></g><g><g><rect fill="white" stroke="none" x="206.14325175296486" y="402.260664033" width="72.71378676824219" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="207.83959978796486" y="412.438752243" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">reply message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 339.62065459665627 416.962347003 L 154.69070155851563 416.962347003" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(145.37963567751564,416.962347003) translate(-145.37963567751564,-416.962347003)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 154.80379142751565 412.250269128 L 145.37963567751564 416.962347003 L 154.80379142751565 421.67442487799997 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 19.00001296009375 433.925827353 L 145.37963567751564 433.925827353 L 155.55772388751564 444.103915563 L 155.55772388751564 459.936497223 L 19.00001296009375 459.936497223 L 19.00001296009375 433.925827353 M 145.37963567751564 433.925827353 L 145.37963567751564 444.103915563 L 155.55772388751564 444.103915563" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="36.321249710425775" y="449.758409013" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">sent message to user</text></g><g><g><rect fill="white" stroke="none" x="50.9219750396836" y="476.899977573" width="72.71378676824219" height="14.70168297"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="8pt" font-style="normal" font-weight="normal" text-decoration="normal" x="52.6183230746836" y="487.078065783" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">reply message</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 145.37963567751564 491.601660543 L 38.48916705109375 491.601660543" stroke-miterlimit="10" stroke-width="0.9424155750000001" stroke-dasharray=""/><g transform="translate(29.17810117009375,491.601660543) translate(-29.17810117009375,-491.601660543)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 38.60225692009375 486.889582668 L 29.17810117009375 491.601660543 L 38.60225692009375 496.31373841799996 Z"/></g></g></g><g/><g/><g/><g/></g></svg>